<!DOCTYPE html>
<html>
<head>
    <title>Ding ðŸ””</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='ding.png') }}" type="image/png">
    <link rel="shortcut icon" href="{{ url_for('static', filename='ding.png') }}" type="image/png">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='ding.png') }}" type="image/png">
    <meta name="description" content="Ding ðŸ”” â€“ A fun, custom search engine created by BARTEKK23. Search your favorite websites quickly and easily.">
    <meta name="keywords" content="Ding, search engine, BARTEKK23, websites, online search">
	<meta name="author" content="BARTEKK23">
	<meta property="og:title" content="Ding ðŸ”” â€“ Search Engine by BARTEKK23">
	<meta property="og:description" content="Search your favorite websites quickly and easily with Ding, the mini search engine inspired by Bing.">
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://ding-uuld.onrender.com/">
	<meta property="og:image" content="{{ url_for('static', filename='ding.png') }}">
</head>
<body>
    <div class="container">
        <h1>Ding <span class="bell-icon"><img src="{{ url_for('static', filename='ding.png') }}" alt="Ding Icon" sizes="16x16"></span></h1>
        <audio id="ding-sound" src="{{ url_for('static', filename='ding.mp3') }}"></audio>

        <!-- User Info -->
        {% if session.get('username') %}
            <p>Hello, {{ session.username }}! <a href="{{ url_for('logout') }}">Logout</a></p>
        {% else %}
            <p><a href="{{ url_for('login') }}">Login</a> | <a href="{{ url_for('register') }}">Register</a></p>
        {% endif %}

        <!-- Search Form -->
        <form method="POST">
            <input type="text" name="query" placeholder="Search Ding..." required>
            <button type="submit">Search</button>
        </form>

        <!-- Results -->
        {% if results %}
            <h2>Results:</h2>
            <ul>
                {% for r in results %}
                    <li><a href="{{ r.url }}" target="_blank">{{ r.title }}</a></li>
                {% endfor %}
            </ul>
        {% else %}
            {% if request.method == "POST" %}
                <p>No results found.</p>
            {% endif %}
        {% endif %}

        <!-- Add Page Button (only if logged in) -->
        {% if session.get('username') %}
            <button onclick="document.getElementById('addForm').style.display='block'" class="add-page-btn">Add Page</button>

            <!-- Add Page Form -->
            <div id="addForm" style="display:none; margin-top:20px;">
                <form method="POST" action="/add">
                    <input type="text" name="title" placeholder="Page Title" required>
                    <input type="text" name="url" placeholder="Page URL" required>
                    <textarea name="content" placeholder="Page Content" required></textarea>
                    <input type="hidden" name="token" value="{{ session.token }}">
                    <button type="submit">Add Page</button>
                </form>
            </div>
        {% else %}
            <p>Login to add pages.</p>
        {% endif %}
    </div>
<script>
  const bell = document.getElementById('bell');
  const sound = document.getElementById('ding-sound');

  bell.addEventListener('click', () => {
    sound.currentTime = 0; // restart sound if clicked multiple times
    sound.play();
    
    // Optional: shake animation
    bell.classList.add('shake');
    setTimeout(() => bell.classList.remove('shake'), 500);
  });
</script>
</body>
</html>
